<!DOCTYPE html>
<html lang="en">

<head>
	<title>three.js webgl - instancing - performance</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link type="text/css" rel="stylesheet" href="main.css">
	<style>
		#info {
			background-color: rgba(0, 0, 0, 0.75);
		}

		.dg .folder .gui-stats {
			height: auto;
		}

		#close_btn {
			position: absolute;
			top: 10px;
			right: 10px;
			display: none;
		}
	</style>
</head>

<body>

	<button id="close_btn">Close</button>
	<div id="container"></div>
	<!-- <script src="tweenjs/lib/tweenjs.js"></script> -->
	<script src="lib/tween.umd.js"></script>
	<script type="module">
		import * as THREE from './lib/three.module.js';

		import Stats from './lib/stats.module.js';
		import { GUI } from './lib/dat.gui.module.js';

		import { OrbitControls } from './lib/OrbitControls.js';

		const _0x541b = ['setPixelRatio', 'log', 'traverse', 'setMatrixAt', 'array', 'update', 'updateProjectionMatrix', 'display', 'setSize', 'domElement', 'count', 'geometry', 'MERGED', 'byteLength', 'position', 'floor', 'setFromCamera', 'method', 'innerWidth', 'innerHeight', 'assign', 'TextureLoader', 'getElementById', 'Color', 'addEventListener', 'close_btn', 'style', 'normalize', 'NAIVE', 'easing', 'dispose', 'pow', 'dom', 'clientY', 'Cubic', 'InOut', 'Tween', 'set', 'clientHeight', 'length', 'object', 'random', 'remove', 'attributes', 'inline-block', 'Vector3', 'click', 'enabled', 'Mesh', 'add', 'push', 'Quaternion', 'MeshPhongMaterial', 'callback', 'appendChild', 'scale', 'applyMatrix4', 'clientX', 'devicePixelRatio', 'Scene', 'red', 'background', 'InstancedMesh', 'INSTANCED', 'bytes', 'outputEncoding', 'Raycaster', 'none', 'start', 'clientWidth', 'compose', 'aspect', 'Euler', 'WebGLRenderer', 'name:\x20', 'Matrix4', 'onUpdate', 'preventDefault']; (function (_0x5c853c, _0x526126) { const _0x541bc0 = function (_0x52eb9b) { while (--_0x52eb9b) { _0x5c853c['push'](_0x5c853c['shift']()); } }; _0x541bc0(++_0x526126); }(_0x541b, 0x1a2)); const _0x52eb = function (_0x5c853c, _0x526126) { _0x5c853c = _0x5c853c - 0x8b; let _0x541bc0 = _0x541b[_0x5c853c]; return _0x541bc0; }; const _0x4009a4 = _0x52eb; let container, stats, gui, guiStatsEl, camera, controls, scene, renderer, material, objects = [], selectedMesh, cameraPosition, closed = !![], radius, phi, theta, lon, lat; const closeBtn = document[_0x4009a4(0xd3)](_0x4009a4(0xd6)), Method = { 'INSTANCED': _0x4009a4(0xae), 'MERGED': _0x4009a4(0xc9), 'NAIVE': _0x4009a4(0x8b) }, api = { 'method': Method['NAIVE'], 'count': 0x32 }; closeBtn['addEventListener'](_0x4009a4(0x9d), function () { const _0x44f3e4 = _0x4009a4; new TWEEN[(_0x44f3e4(0x93))](camera['position'])['to'](cameraPosition, 0x3e8)['yoyo'](!![])[_0x44f3e4(0xbb)](() => { const _0x1067d0 = _0x44f3e4; closeBtn[_0x1067d0(0xd7)][_0x1067d0(0xc4)] = _0x1067d0(0xb2); })[_0x44f3e4(0x8c)](TWEEN['Easing'][_0x44f3e4(0x91)][_0x44f3e4(0x92)])[_0x44f3e4(0xb3)](), setTimeout(() => { const _0x232195 = _0x44f3e4; controls[_0x232195(0x9e)] = !![], closed = !![]; }, 0x3ea); }); const randomizeMatrix = function () { const _0x131b03 = _0x4009a4, _0x4693f4 = new THREE[(_0x131b03(0x9c))](), _0x2c4090 = new THREE[(_0x131b03(0xb7))](), _0x1e52a1 = new THREE[(_0x131b03(0xa2))](), _0x161cdb = new THREE['Vector3'](); return function (_0x17cb81) { const _0x407df8 = _0x131b03; _0x4693f4['x'] = Math[_0x407df8(0x98)]() * 0x28 - 0x14, _0x4693f4['y'] = Math[_0x407df8(0x98)]() * 0x28 - 0x14, _0x4693f4['z'] = Math['random']() * 0x28 - 0x14, _0x2c4090['x'] = Math[_0x407df8(0x98)]() * 0x2 * Math['PI'], _0x2c4090['y'] = Math[_0x407df8(0x98)]() * 0x2 * Math['PI'], _0x2c4090['z'] = Math[_0x407df8(0x98)]() * 0x2 * Math['PI'], _0x1e52a1['setFromEuler'](_0x2c4090), _0x161cdb['x'] = _0x161cdb['y'] = _0x161cdb['z'] = Math[_0x407df8(0x98)]() * 0x1, _0x17cb81[_0x407df8(0xb5)](_0x4693f4, _0x1e52a1, _0x161cdb); }; }(); init(), initMesh(), animate(); function clean() { const _0xb41373 = _0x4009a4, _0x4e5f46 = []; scene[_0xb41373(0xbf)](function (_0x7f04c5) { const _0x4d95aa = _0xb41373; if (_0x7f04c5['isMesh']) _0x4e5f46[_0x4d95aa(0xa1)](_0x7f04c5); }); for (let _0x1e3078 = 0x0; _0x1e3078 < _0x4e5f46[_0xb41373(0x96)]; _0x1e3078++) { const _0xeaec57 = _0x4e5f46[_0x1e3078]; _0xeaec57['material'][_0xb41373(0x8d)](), _0xeaec57[_0xb41373(0xc8)][_0xb41373(0x8d)](), scene[_0xb41373(0x99)](_0xeaec57); } } function initMesh() { const _0x91ac35 = _0x4009a4; clean(); const _0xa28cd8 = new THREE[(_0x91ac35(0xd2))](), _0x33c809 = new THREE['SphereBufferGeometry'](0x3, 0x32, 0x32); material = new THREE[(_0x91ac35(0xa3))]({ 'color': _0x91ac35(0xab) }); switch (api[_0x91ac35(0xce)]) { case Method[_0x91ac35(0xae)]: makeInstanced(_0x33c809); break; case Method[_0x91ac35(0xc9)]: makeMerged(_0x33c809); break; case Method[_0x91ac35(0x8b)]: makeNaive(_0x33c809); break; }return _0x33c809; } function makeInstanced(_0x32b843) { const _0x5db6b4 = _0x4009a4, _0x1b0f9d = new THREE[(_0x5db6b4(0xba))](), _0x34497c = new THREE[(_0x5db6b4(0xad))](_0x32b843, material, api['count']); for (let _0x5d2694 = 0x0; _0x5d2694 < api[_0x5db6b4(0xc7)]; _0x5d2694++) { randomizeMatrix(_0x1b0f9d), _0x34497c[_0x5db6b4(0xc0)](_0x5d2694, _0x1b0f9d); } scene[_0x5db6b4(0xa0)](_0x34497c); const _0x1f7ac2 = getGeometryByteLength(_0x32b843); } function makeMerged(_0x216f7f) { const _0x5d8d7a = _0x4009a4, _0x1681a3 = [], _0x34a38a = new THREE[(_0x5d8d7a(0xba))](); for (let _0x5a5a55 = 0x0; _0x5a5a55 < api[_0x5d8d7a(0xc7)]; _0x5a5a55++) { randomizeMatrix(_0x34a38a); const _0x1d47a9 = _0x216f7f['clone'](); _0x1d47a9['applyMatrix4'](_0x34a38a), _0x1681a3[_0x5d8d7a(0xa1)](_0x1d47a9); } } function makeNaive(_0x18ba7c) { const _0x48b730 = _0x4009a4, _0x20e9ff = new THREE[(_0x48b730(0xba))](); for (let _0x5c8dda = 0x0; _0x5c8dda < api['count']; _0x5c8dda++) { randomizeMatrix(_0x20e9ff); const _0x530e5f = new THREE[(_0x48b730(0x9f))](_0x18ba7c, material); _0x530e5f[_0x48b730(0xa7)](_0x20e9ff); var _0x73bbf0 = 0.2; _0x530e5f[_0x48b730(0xa6)]['x'] = _0x73bbf0, _0x530e5f[_0x48b730(0xa6)]['y'] = _0x73bbf0, _0x530e5f[_0x48b730(0xa6)]['z'] = _0x73bbf0, _0x530e5f[_0x48b730(0xa4)] = function () { const _0x2177c1 = _0x48b730; if (!closed) return; console[_0x2177c1(0xbe)](_0x2177c1(0xb9), this[_0x2177c1(0xcb)]), console[_0x2177c1(0xbe)]('Camera:\x20', camera['position']); var _0x3e9258 = new THREE[(_0x2177c1(0x9c))](0x0, 0x0, 0x0); const _0x5e7b6e = 5.7; closed = ![], controls[_0x2177c1(0x9e)] = ![], cameraPosition = { ...camera[_0x2177c1(0xcb)] }, new TWEEN['Tween'](camera[_0x2177c1(0xcb)])['to']({ 'x': this[_0x2177c1(0xcb)]['x'], 'y': this['position']['y'], 'z': this['position']['z'] + 0x2 }, 0x3e8)['yoyo'](!![])[_0x2177c1(0xbb)](() => { const _0x407543 = _0x2177c1; closeBtn['style'][_0x407543(0xc4)] = _0x407543(0x9b); })[_0x2177c1(0xb3)](), setTimeout(() => { }, 0x3ea); }, scene['add'](_0x530e5f), objects['push'](_0x530e5f); } const _0x3c99b8 = getGeometryByteLength(_0x18ba7c); } function init() { const _0x58be37 = _0x4009a4, _0x798e1a = window['innerWidth'], _0x24ce07 = window[_0x58be37(0xd0)]; camera = new THREE['PerspectiveCamera'](0x2d, _0x798e1a / _0x24ce07, 0x1, 0x3e8), camera[_0x58be37(0xcb)]['z'] = 0x1e, renderer = new THREE[(_0x58be37(0xb8))]({ 'antialias': !![] }), renderer[_0x58be37(0xbd)](window[_0x58be37(0xa9)]), renderer['setSize'](_0x798e1a, _0x24ce07), renderer[_0x58be37(0xb0)] = THREE['sRGBEncoding'], container = document['getElementById']('container'), container[_0x58be37(0xa5)](renderer[_0x58be37(0xc6)]), scene = new THREE[(_0x58be37(0xaa))](), scene[_0x58be37(0xac)] = new THREE[(_0x58be37(0xd4))](0xffffff); var _0x110f6d = new THREE['DirectionalLight'](0xffffff); _0x110f6d[_0x58be37(0xcb)][_0x58be37(0x94)](0x0, 0x0, 0x1)[_0x58be37(0xd8)](), scene[_0x58be37(0xa0)](_0x110f6d), controls = new OrbitControls(camera, renderer[_0x58be37(0xc6)]), stats = new Stats(), container[_0x58be37(0xa5)](stats[_0x58be37(0x8f)]), window[_0x58be37(0xd5)]('resize', onWindowResize, ![]), Object[_0x58be37(0xd1)](window, { 'scene': scene }); } function onWindowResize() { const _0x9a4a02 = _0x4009a4, _0xf74b00 = window[_0x9a4a02(0xcf)], _0x10b5a8 = window['innerHeight']; camera[_0x9a4a02(0xb6)] = _0xf74b00 / _0x10b5a8, camera[_0x9a4a02(0xc3)](), renderer[_0x9a4a02(0xc5)](_0xf74b00, _0x10b5a8); } function animate() { const _0x5975cb = _0x4009a4; requestAnimationFrame(animate), TWEEN['update'](), stats[_0x5975cb(0xc2)](), render(); } function render() { renderer['render'](scene, camera); } function getGeometryByteLength(_0x5a57b6) { const _0x1d76fe = _0x4009a4; let _0x2f4dae = 0x0; if (_0x5a57b6['index']) _0x2f4dae += _0x5a57b6['index'][_0x1d76fe(0xc1)][_0x1d76fe(0xca)]; for (const _0x42eca7 in _0x5a57b6[_0x1d76fe(0x9a)]) { _0x2f4dae += _0x5a57b6['attributes'][_0x42eca7][_0x1d76fe(0xc1)][_0x1d76fe(0xca)]; } return _0x2f4dae; } function formatBytes(_0x3ceff1, _0x2b5694) { const _0xaddb57 = _0x4009a4; if (_0x3ceff1 === 0x0) return '0\x20bytes'; const _0x3ca9e1 = 0x400, _0x21ed22 = _0x2b5694 < 0x0 ? 0x0 : _0x2b5694, _0x1a623b = [_0xaddb57(0xaf), 'KB', 'MB'], _0x1bd0ab = Math[_0xaddb57(0xcc)](Math[_0xaddb57(0xbe)](_0x3ceff1) / Math['log'](_0x3ca9e1)); return parseFloat((_0x3ceff1 / Math[_0xaddb57(0x8e)](_0x3ca9e1, _0x1bd0ab))['toFixed'](_0x21ed22)) + '\x20' + _0x1a623b[_0x1bd0ab]; } var raycaster = new THREE[(_0x4009a4(0xb1))](), mouse = new THREE['Vector2'](); function onDocumentMouseDown(_0x441a58) { const _0x2fc82b = _0x4009a4; _0x441a58[_0x2fc82b(0xbc)](), mouse['x'] = _0x441a58[_0x2fc82b(0xa8)] / renderer[_0x2fc82b(0xc6)][_0x2fc82b(0xb4)] * 0x2 - 0x1, mouse['y'] = -(_0x441a58[_0x2fc82b(0x90)] / renderer[_0x2fc82b(0xc6)][_0x2fc82b(0x95)]) * 0x2 + 0x1, raycaster[_0x2fc82b(0xcd)](mouse, camera); var _0x4a4411 = raycaster['intersectObjects'](objects, !![]); _0x4a4411[_0x2fc82b(0x96)] > 0x0 && _0x4a4411[0x0][_0x2fc82b(0x97)][_0x2fc82b(0xa4)](); } window['addEventListener'](_0x4009a4(0x9d), onDocumentMouseDown);
	</script>
</body>

</html>